SSL Switcher

[機能]
  MODxの[~(ドキュメントID)~]表記の機能拡張版です。
  ドキュメントごとにhttpsの使用の有無を設定し、httpのドキュメントからhttpsの
  ドキュメントへのリンクはhttps付のURLに置き換えます。
  (httpからhttpへのリンクも変換します)

[動作確認環境]
  ・MODx0.9.5 and 0.9.6
  ・PHP5.2.x
  ・MySQL 5.0.33
  ・文字コード UTF-8

[インストール方法]
1.アーカイブファイルを解凍します。

2.管理画面でプラグインを新規作成します。
  ※「リソース」→「リソース管理」→「プラグイン」→「プラグインの作成」

    [全般]
    プラグイン名    : sslSwitcher
    説明            : (任意)
    プラグインコード: sslSwitcher.txtファイルの中身をそのまま張りつける

    [設定]※特に設定はありません    

    [システムイベント]
    次のイベントをクリックしてチェックを付けてください。

      ・OnWebPagePrerender

3.管理画面でテンプレート変数を作成します。
  ※「リソース」→「リソース管理」→「テンプレート変数」
                                         →「テンプレート変数の作成」

    変数名               : sslSwitcher
    説明                 : (任意)
    入力タイプ           : Check Box
    入力時のオプション値 : UseHTTPS
    規定値               : 空白のまま
    Widget               : 選択無
    並べ替え順           : (任意)※わからなければ0でOKです
    テンプレートへのアクセス： 
                    現在使用しているテンプレートをチェックしてください。
                    (よくわかれなければ全てにチェックでもOKです)

[使い方]
1.管理画面でhttpsを使いたいドキュメントを編集します。
  テンプレート変数の部分に「UseHTTPS」と書かれたチェックボックスが表示されて
  いるので、チェックをつけて保存します。

2.ドキュメント内で[~(ドキュメントID)~]と書く部分を以下のように書き換えます。

    [~s(ドキュメントID)~]    ※「s」がついてます。

  これで通常は[~(ドキュメントID)~]と同じような変換を行うのですが、httpから
  httpsのドキュメントに移るような場合はhttps付のURLにかわります。
  (httpsからhttpに移るときはhttp付のURLにかわります)

[例]
  [サイトのURL] http://ayd.jp/
  [httpのドキュメントID] 10
  [httpsのドキュメントID] 20

1.ドキュメントID10で以下の書き方をした場合の変換後のURL

    [~s10~] → /index.php?q=10
    [~s20~] → https://ayd.jp/index.php?q=20

2.ドキュメントID20で以下の書き方をした場合の変換後のURL

    [~s10~] → http://ayd.jp/index.php?q=10
    [~s20~] → /index.php?q=20


[更新履歴]
 2007/12/10 - 1.00
  ・リリース

